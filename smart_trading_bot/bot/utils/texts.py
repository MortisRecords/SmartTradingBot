"""
–¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è Telegram –±–æ—Ç–∞
"""

from typing import Dict, Any
from datetime import datetime

# –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
WELCOME_TEXT = """
ü§ñ <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Smart Trading Bot!</b>

–ü—Ä–∏–≤–µ—Ç, <b>{first_name}</b>! üëã

üéØ <b>–ß—Ç–æ —è —É–º–µ—é:</b>
‚Ä¢ üìä –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ä—ã–Ω–æ–∫ —Å –ø–æ–º–æ—â—å—é Smart Money –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
‚Ä¢ üéØ –ì–µ–Ω–µ—Ä–∏—Ä—É—é —Ç–æ—á–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã  
‚Ä¢ üí∞ –ü–æ–º–æ–≥–∞—é –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π
‚Ä¢ üìà –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É

<b>üíé Premium –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</b>
‚Ä¢ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
‚Ä¢ –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞
‚Ä¢ VIP –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7
‚Ä¢ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

<b>üí∞ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞:</b>
–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π—Ç–µ <b>2% –æ—Ç –∏—Ö —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –æ–±–æ—Ä–æ—Ç–∞</b> –ø–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ!

üÜî –í–∞—à ID: <code>{user_id}</code>

<i>‚ö†Ô∏è –¢–æ—Ä–≥–æ–≤–ª—è —Å–æ–ø—Ä—è–∂–µ–Ω–∞ —Å —Ä–∏—Å–∫–∞–º–∏. –ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ!</i>
"""

HELP_TEXT = """
üìã <b>–°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É</b>

<b>üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>
/start - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
/signal - –ü–æ–ª—É—á–∏—Ç—å —Ç–æ—Ä–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª  
/stats - –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/referral - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
/help - –≠—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞

<b>üìä –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–∏–≥–Ω–∞–ª—ã:</b>
1. –ë–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä—ã–Ω–æ–∫ —Å –ø–æ–º–æ—â—å—é Smart Money –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
2. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ —Å –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –ø—Ä–∏–±—ã–ª–∏
3. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É—Ä–æ–≤–Ω–∏ Take Profit –∏ Stop Loss
4. –£–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Å–∏–≥–Ω–∞–ª–µ

<b>üí∞ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞:</b>
‚Ä¢ –ü–æ–ª—É—á–∞–π—Ç–µ 2% –æ—Ç –æ–±–æ—Ä–æ—Ç–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ
‚Ä¢ –í—ã–ø–ª–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é
‚Ä¢ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤

<b>üíé Premium –ø–æ–¥–ø–∏—Å–∫–∞ ($29.99/–º–µ—Å):</b>
‚Ä¢ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã (–±–µ—Å–ø–ª–∞—Ç–Ω–æ: 10/–¥–µ–Ω—å)
‚Ä¢ –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
‚Ä¢ –°–∏–≥–Ω–∞–ª—ã –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–æ–≤
‚Ä¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

<b>üëë VIP –ø–æ–¥–ø–∏—Å–∫–∞ ($99.99/–º–µ—Å):</b>
‚Ä¢ –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Premium
‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏  
‚Ä¢ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
‚Ä¢ –†–∞–Ω–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º

<b>üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:</b>
‚Ä¢ üåê <a href="https://yourdomain.com">–í–µ–±-—Å–∞–π—Ç</a>
‚Ä¢ üì± <a href="https://t.me/your_channel">Telegram –∫–∞–Ω–∞–ª</a>
‚Ä¢ üí¨ <a href="https://t.me/your_support_bot">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>

<i>–£–¥–∞—á–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏! üöÄ</i>
"""

NO_SIGNALS_TEXT = """
‚è≥ <b>–°–∏–≥–Ω–∞–ª—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</b>

–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Ä—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤.

üîç <b>–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:</b>
‚Ä¢ –ù–∏–∑–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å —Ä—ã–Ω–∫–∞
‚Ä¢ –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å —Ç—Ä–µ–Ω–¥–∞  
‚Ä¢ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å Smart Money
‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ –±–∏—Ä–∂–∞—Ö

‚è∞ <b>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</b>
‚Ä¢ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ 15-30 –º–∏–Ω—É—Ç
‚Ä¢ –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚Ä¢ –ò–∑—É—á–∏—Ç–µ –æ–±—É—á–∞—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

üí° <b>–°–æ–≤–µ—Ç:</b> –õ—É—á—à–∏–µ —Å–∏–≥–Ω–∞–ª—ã –æ–±—ã—á–Ω–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–µ—Å—Å–∏–π (09:00-18:00 –ú–°–ö).
"""

PREMIUM_INFO_TEXT = """
üíé <b>Premium –ø–æ–¥–ø–∏—Å–∫–∞</b>

<b>üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ:</b>
‚Ä¢ 10 —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ –¥–µ–Ω—å
‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ –∞–∫—Ç–∏–≤—ã (BTC, ETH, EUR/USD)
‚Ä¢ –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

<b>üíé Premium - $29.99/–º–µ—Å—è—Ü:</b>
‚Ä¢ ‚ôæÔ∏è –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
‚Ä¢ üåç –í—Å–µ –∞–∫—Ç–∏–≤—ã (50+ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤)
‚Ä¢ üìä –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
‚Ä¢ üìà –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
‚Ä¢ üîî Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚Ä¢ üí¨ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

<b>üëë VIP - $99.99/–º–µ—Å—è—Ü:</b>
‚Ä¢ üéØ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Premium
‚Ä¢ üë®‚Äçüíº –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
‚Ä¢ üìû –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
‚Ä¢ üéì –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –æ–±—É—á–∞—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
‚Ä¢ üöÄ –†–∞–Ω–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º
‚Ä¢ üìä –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚Ä¢ üèÜ VIP —Å—Ç–∞—Ç—É—Å –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ

<b>üéÅ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:</b>
‚Ä¢ 7 –¥–Ω–µ–π Premium –ë–ï–°–ü–õ–ê–¢–ù–û
‚Ä¢ –°–∫–∏–¥–∫–∞ 20% –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ –Ω–∞ –≥–æ–¥
‚Ä¢ –í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π

<b>üí≥ –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:</b>
–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã, PayPal, –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã, –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã

<i>üí° –û–±–Ω–æ–≤–∏—Ç–µ—Å—å –¥–æ Premium –∏ —É–≤–µ–ª–∏—á—å—Ç–µ —Å–≤–æ—é –ø—Ä–∏–±—ã–ª—å!</i>
"""

def format_signal_message(signal_data: Dict[str, Any]) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ç–æ—Ä–≥–æ–≤—ã–º —Å–∏–≥–Ω–∞–ª–æ–º"""
    
    # –≠–º–æ–¥–∑–∏ –¥–ª—è —Ç–∏–ø–∞ —Å–∏–≥–Ω–∞–ª–∞
    signal_emoji = "üü¢" if signal_data['signal_type'] in ['BUY', 'CALL'] else "üî¥"
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏
    expires_at = signal_data.get('expires_at')
    if expires_at:
        expire_time = expires_at.strftime("%H:%M")
    else:
        expire_time = "15-30 –º–∏–Ω"
    
    # –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    text = f"""
{signal_emoji} <b>–¢–û–†–ì–û–í–´–ô –°–ò–ì–ù–ê–õ</b>

üìä <b>–ê–∫—Ç–∏–≤:</b> {signal_data['symbol']}
üéØ <b>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</b> {signal_data['signal_type']}
üí∞ <b>–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞:</b> ${signal_data['entry_price']:.4f}

<b>üéØ –¶–µ–ª–∏:</b>
‚Ä¢ Take Profit: ${signal_data.get('take_profit', 0):.4f}
‚Ä¢ Stop Loss: ${signal_data.get('stop_loss', 0):.4f}

<b>üìà –ê–Ω–∞–ª–∏–∑:</b>
‚Ä¢ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: <b>{signal_data['confidence']:.0f}%</b>
‚Ä¢ –¢–∞–π–º—Ñ—Ä–µ–π–º: {signal_data.get('timeframe', '1h')}
‚Ä¢ –≠–∫—Å–ø–∏—Ä–∞—Ü–∏—è: {expire_time}

<b>üß† Smart Money –∏–Ω–¥–µ–∫—Å:</b> {signal_data.get('analysis', {}).get('smart_money_index', 0):.3f}
"""

    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è Premium
    analysis = signal_data.get('analysis', {})
    if analysis:
        text += f"""
<b>üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑:</b>
‚Ä¢ RSI: {analysis.get('rsi', 0):.1f}
‚Ä¢ MACD: {analysis.get('macd_signal', '–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ')}
‚Ä¢ –¢—Ä–µ–Ω–¥: {analysis.get('trend', '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω')}
‚Ä¢ –û–±—ä–µ–º: {analysis.get('volume_analysis', '–°—Ä–µ–¥–Ω–∏–π')}
"""

    # –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
    text += """
‚ö†Ô∏è <i>–¢–æ—Ä–≥–æ–≤–ª—è —Å–æ–ø—Ä—è–∂–µ–Ω–∞ —Å —Ä–∏—Å–∫–∞–º–∏. –ù–µ –∏–Ω–≤–µ—Å—Ç–∏—Ä—É–π—Ç–µ –±–æ–ª—å—à–µ, —á–µ–º –º–æ–∂–µ—Ç–µ –ø–æ—Ç–µ—Ä—è—Ç—å.</i>

üöÄ <b>–£–¥–∞—á–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏!</b>
"""
    
    return text

def format_user_stats(stats: Dict[str, Any]) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    
    text = f"""
üìä <b>–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</b>

<b>üéØ –¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã:</b>
‚Ä¢ –í—Å–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–æ: {stats.get('total_signals', 0)}
‚Ä¢ –£—Å–ø–µ—à–Ω—ã—Ö: {stats.get('successful_signals', 0)}
‚Ä¢ –¢–æ—á–Ω–æ—Å—Ç—å: {stats.get('success_rate', 0):.1f}%

<b>üí∞ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞:</b>
‚Ä¢ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ: {stats.get('referrals_count', 0)} —á–µ–ª–æ–≤–µ–∫
‚Ä¢ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: ${stats.get('commission_earned', 0):.2f}
‚Ä¢ –í—ã–≤–µ–¥–µ–Ω–æ: ${stats.get('commission_withdrawn', 0):.2f}
‚Ä¢ –ö –≤—ã–≤–æ–¥—É: ${stats.get('commission_earned', 0) - stats.get('commission_withdrawn', 0):.2f}

<b>üìà –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</b>
‚Ä¢ –°—Ç–∞—Ç—É—Å: {'üíé Premium' if stats.get('is_premium') else 'üÜì –ë–∞–∑–æ–≤—ã–π'}
‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: {stats.get('created_at', '').split('T')[0] if stats.get('created_at') else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}
‚Ä¢ –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: {stats.get('last_active', '–°–µ–≥–æ–¥–Ω—è')}

<b>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</b>
"""

    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    achievements = []
    if stats.get('referrals_count', 0) >= 10:
        achievements.append("üåü –ê–∫—Ç–∏–≤–Ω—ã–π —Ä–µ—Ñ–µ—Ä–µ—Ä")
    if stats.get('success_rate', 0) >= 70:
        achievements.append("üéØ –ú–µ—Ç–∫–∏–π —Ç—Ä–µ–π–¥–µ—Ä")
    if stats.get('total_signals', 0) >= 100:
        achievements.append("üìä –û–ø—ã—Ç–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫")
    if stats.get('commission_earned', 0) >= 100:
        achievements.append("üí∞ –£—Å–ø–µ—à–Ω—ã–π –ø–∞—Ä—Ç–Ω–µ—Ä")
    
    if achievements:
        for achievement in achievements:
            text += f"‚Ä¢ {achievement}\n"
    else:
        text += "‚Ä¢ –ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π\n"
    
    return text

def format_referral_info(user_id: int, stats: Dict[str, Any]) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ"""
    
    referral_link = f"https://t.me/YourBotUsername?start=ref_{user_id}"
    
    text = f"""
üë• <b>–†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –ü–†–û–ì–†–ê–ú–ú–ê</b>

üí∞ <b>–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ 2% —Å –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!</b>

<b>üîó –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:</b>
<code>{referral_link}</code>

<b>üìä –í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</b>
‚Ä¢ üë• –ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ: {stats.get('referrals_count', 0)} —á–µ–ª–æ–≤–µ–∫
‚Ä¢ üí∞ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: ${stats.get('commission_earned', 0):.2f}
‚Ä¢ üìà –ê–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤: {stats.get('active_referrals', 0)}
‚Ä¢ üìä –°—Ä–µ–¥–Ω–∏–π –æ–±–æ—Ä–æ—Ç: ${stats.get('avg_referral_volume', 0):.2f}

<b>üí∏ –í—ã–ø–ª–∞—Ç—ã:</b>
‚Ä¢ –ú–∏–Ω–∏–º—É–º –∫ –≤—ã–≤–æ–¥—É: $50
‚Ä¢ –í—ã–ø–ª–∞—Ç—ã: –∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
‚Ä¢ –ö–æ–º–∏—Å—Å–∏—è: 0% (–º—ã –ø–ª–∞—Ç–∏–º –∑–∞ –ø–µ—Ä–µ–≤–æ–¥—ã)

<b>üöÄ –ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ—Ö–æ–¥—ã:</b>
1. –î–µ–ª–∏—Ç–µ—Å—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å–∏–≥–Ω–∞–ª–∞–º–∏
2. –ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–π–¥–µ—Ä–æ–≤  
3. –ü–æ–º–æ–≥–∞–π—Ç–µ –Ω–æ–≤–∏—á–∫–∞–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏

<b>üèÜ –¢–æ–ø-—Ä–µ—Ñ–µ—Ä–µ—Ä—ã —ç—Ç–æ–≥–æ –º–µ—Å—è—Ü–∞:</b>
–ü–æ–ø–∞–¥–∏—Ç–µ –≤ —Ç–æ–ø –∏ –ø–æ–ª—É—á–∏—Ç–µ –±–æ–Ω—É—Å 50%!

<i>üí° –°–æ–≤–µ—Ç: –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–∞–ª—ã –ø—Ä–∏–Ω–æ—Å—è—Ç –≤ 10 —Ä–∞–∑ –±–æ–ª—å—à–µ –¥–æ—Ö–æ–¥–∞!</i>
"""
    
    return text

def format_admin_stats(stats: Dict[str, Any]) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω—Å–∫–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏"""
    
    text = f"""
üìä <b>–ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ - –°–¢–ê–¢–ò–°–¢–ò–ö–ê</b>

<b>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:</b>
‚Ä¢ –í—Å–µ–≥–æ: {stats.get('total_users', 0)}
‚Ä¢ –ù–æ–≤—ã—Ö —Å–µ–≥–æ–¥–Ω—è: {stats.get('new_users_today', 0)}
‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö (7 –¥–Ω–µ–π): {stats.get('active_users', 0)}
‚Ä¢ Premium: {stats.get('premium_users', 0)}
‚Ä¢ VIP: {stats.get('vip_users', 0)}

<b>üìà –°–∏–≥–Ω–∞–ª—ã:</b>
‚Ä¢ –í—Å–µ–≥–æ: {stats.get('total_signals', 0)}
‚Ä¢ –°–µ–≥–æ–¥–Ω—è: {stats.get('signals_today', 0)}
‚Ä¢ –°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å: {stats.get('avg_accuracy', 0):.1f}%
‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö: {stats.get('active_signals', 0)}

<b>üí∞ –§–∏–Ω–∞–Ω—Å—ã:</b>
‚Ä¢ –û–±—â–∏–π –æ–±–æ—Ä–æ—Ç: ${stats.get('total_volume', 0):,.2f}
‚Ä¢ –ö–æ–º–∏—Å—Å–∏–π –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: ${stats.get('total_commission', 0):,.2f}
‚Ä¢ –í—ã–ø–ª–∞—á–µ–Ω–æ: ${stats.get('paid_commission', 0):,.2f}
‚Ä¢ –î–æ—Ö–æ–¥ —Å–µ–≥–æ–¥–Ω—è: ${stats.get('revenue_today', 0):.2f}

<b>üåç –ì–µ–æ–≥—Ä–∞—Ñ–∏—è:</b>
‚Ä¢ –†–æ—Å—Å–∏—è: {stats.get('users_ru', 0)} ({stats.get('users_ru_percent', 0):.1f}%)
‚Ä¢ –£–∫—Ä–∞–∏–Ω–∞: {stats.get('users_ua', 0)} ({stats.get('users_ua_percent', 0):.1f}%)
‚Ä¢ –î—Ä—É–≥–∏–µ: {stats.get('users_other', 0)} ({stats.get('users_other_percent', 0):.1f}%)

<b>‚ö° –°–∏—Å—Ç–µ–º–∞:</b>
‚Ä¢ –ê–ø—Ç–∞–π–º: {stats.get('uptime', '99.9%')}
‚Ä¢ –í–µ—Ä—Å–∏—è: {stats.get('version', '1.0.0')}
‚Ä¢ –ù–∞–≥—Ä—É–∑–∫–∞ CPU: {stats.get('cpu_usage', 0):.1f}%
‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM: {stats.get('ram_usage', 0):.1f}%
‚Ä¢ –†–∞–∑–º–µ—Ä –ë–î: {stats.get('db_size', 0):.1f} MB

<b>üìÖ –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</b> {datetime.now().strftime('%d.%m.%Y %H:%M')}
"""
    
    return text

# –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
ERROR_MESSAGES = {
    'insufficient_funds': 'üí∏ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏.',
    'invalid_signal': '‚ùå –°–∏–≥–Ω–∞–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–ª.',
    'rate_limit': '‚è±Ô∏è –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É.',
    'maintenance': 'üîß –ü—Ä–æ–≤–æ–¥—è—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.',
    'api_error': '‚ö†Ô∏è –û—à–∏–±–∫–∞ API. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.',
    'database_error': 'üíæ –û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.',
    'permission_denied': 'üö´ –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è.',
    'invalid_format': 'üìù –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö.',
    'expired_session': '‚è∞ –°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞.',
    'feature_premium': 'üíé –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ Premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.'
}

# –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
SUCCESS_MESSAGES = {
    'signal_sent': '‚úÖ –°–∏–≥–Ω–∞–ª —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!',
    'settings_saved': 'üíæ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã.',
    'subscription_activated': 'üíé –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!',
    'payout_requested': 'üí∞ –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–ø–ª–∞—Ç—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω.',
    'referral_registered': 'üéâ –ù–æ–≤—ã–π —Ä–µ—Ñ–µ—Ä–∞–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω!',
    'notification_sent': 'üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.',
    'data_exported': 'üì§ –î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã.',
    'backup_created': 'üíæ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞.'
}

# –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
CONFIRMATION_MESSAGES = {
    'delete_account': '‚ö†Ô∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.',
    'reset_settings': 'üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?',
    'ban_user': 'üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?',
    'delete_signal': 'üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Å–∏–≥–Ω–∞–ª?',
    'send_broadcast': 'üì° –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º?',
    'withdraw_commission': f'üí∞ –í—ã–≤–µ—Å—Ç–∏ –∫–æ–º–∏—Å—Å–∏—é? –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞: $50'
}

# –û–±—É—á–∞—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
EDUCATIONAL_CONTENT = {
    'smart_money_basics': """
üß† <b>–ß—Ç–æ —Ç–∞–∫–æ–µ Smart Money?</b>

Smart Money (—É–º–Ω—ã–µ –¥–µ–Ω—å–≥–∏) ‚Äî —ç—Ç–æ –∫–∞–ø–∏—Ç–∞–ª –∏–Ω—Å—Ç–∏—Ç—É—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤: –±–∞–Ω–∫–æ–≤, —Ö–µ–¥–∂-—Ñ–æ–Ω–¥–æ–≤, –∫—Ä—É–ø–Ω—ã—Ö –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–π.

<b>üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä:</b>
1. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±—ä–µ–º—ã —Ç–æ—Ä–≥–æ–≤
2. –í—ã—è–≤–ª—è–µ—Ç –∞–Ω–æ–º–∞–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
3. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –∫–∞–ø–∏—Ç–∞–ª–∞
4. –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç—ã —Ç—Ä–µ–Ω–¥–∞

<b>üìä –ö–ª—é—á–µ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã:</b>
‚Ä¢ –ê–∫–∫—É–º—É–ª—è—Ü–∏—è ‚Äî —É–º–Ω—ã–µ –¥–µ–Ω—å–≥–∏ –ø–æ–∫—É–ø–∞—é—Ç
‚Ä¢ –î–∏—Å—Ç—Ä–∏–±—É—Ü–∏—è ‚Äî —É–º–Ω—ã–µ –¥–µ–Ω—å–≥–∏ –ø—Ä–æ–¥–∞—é—Ç
‚Ä¢ –ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞ ‚Äî –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å

<b>üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</b>
‚Ä¢ –û–ø–µ—Ä–µ–∂–∞—é—â–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
‚Ä¢ –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å —Å–∏–≥–Ω–∞–ª–æ–≤
‚Ä¢ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Ä—ã–Ω–∫–∞—Ö
‚Ä¢ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ª—é–±—ã—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤
""",

    'risk_management': """
üíº <b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏</b>

<b>üìè –ü—Ä–∞–≤–∏–ª–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏:</b>
‚Ä¢ –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∏—Å–∫—É–π—Ç–µ –±–æ–ª—å—à–µ 2% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Stop Loss –≤ –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–µ
‚Ä¢ –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –ø–æ—Ä—Ç—Ñ–µ–ª—å

<b>üéØ –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∏—Å–∫/–ø—Ä–∏–±—ã–ª—å:</b>
‚Ä¢ –ú–∏–Ω–∏–º—É–º 1:2 (—Ä–∏—Å–∫ $1, –ø—Ä–∏–±—ã–ª—å $2)
‚Ä¢ –õ—É—á—à–µ 1:3 –∏–ª–∏ –≤—ã—à–µ
‚Ä¢ –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –∫–æ–º–∏—Å—Å–∏–∏ –±—Ä–æ–∫–µ—Ä–∞

<b>üß† –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏:</b>
‚Ä¢ –ù–µ —Ç–æ—Ä–≥—É–π—Ç–µ –Ω–∞ —ç–º–æ—Ü–∏—è—Ö
‚Ä¢ –°–ª–µ–¥—É–π—Ç–µ —Ç–æ—Ä–≥–æ–≤–æ–º—É –ø–ª–∞–Ω—É
‚Ä¢ –ü—Ä–∏–Ω–∏–º–∞–π—Ç–µ —É–±—ã—Ç–∫–∏ –∫–∞–∫ —á–∞—Å—Ç—å –∏–≥—Ä—ã
‚Ä¢ –ù–µ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ –ø–æ–∑–∏—Ü–∏—é –ø–æ—Å–ª–µ —É–±—ã—Ç–∫–∞

<b>‚ö†Ô∏è –ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞:</b>
1. –¢–æ—Ä–≥—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω—ã–º–∏ –¥–µ–Ω—å–≥–∞–º–∏
2. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Stop Loss
3. –ù–µ —Ä–∏—Å–∫—É–π—Ç–µ –±–æ–ª–µ–µ 10% –¥–µ–ø–æ–∑–∏—Ç–∞ –≤ –¥–µ–Ω—å
4. –í–µ–¥–∏—Ç–µ —Ç–æ—Ä–≥–æ–≤—ã–π –¥–Ω–µ–≤–Ω–∏–∫
""",

    'platform_comparison': """
üè¢ <b>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º</b>

<b>üéØ Binarium:</b>
‚úÖ –ë–∏–Ω–∞—Ä–Ω—ã–µ –æ–ø—Ü–∏–æ–Ω—ã
‚úÖ –ë—ã—Å—Ç—Ä—ã–µ –≤—ã–ø–ª–∞—Ç—ã (–¥–æ 24 —á–∞—Å–æ–≤)
‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç $10
‚úÖ –í—ã—Å–æ–∫–∏–µ –≤—ã–ø–ª–∞—Ç—ã (–¥–æ 90%)
‚úÖ –£–¥–æ–±–Ω–∞—è –º–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤—ã
‚ùå –¢–æ–ª—å–∫–æ –±–∏–Ω–∞—Ä–Ω—ã–µ –æ–ø—Ü–∏–æ–Ω—ã

<b>üíº PocketOption:</b>
‚úÖ CFD –∏ –æ–ø—Ü–∏–æ–Ω—ã
‚úÖ –î–µ–º–æ-—Å—á–µ—Ç $10,000
‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç $5
‚úÖ –¢—É—Ä–Ω–∏—Ä—ã —Å –ø—Ä–∏–∑–∞–º–∏
‚úÖ –°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ –ë–æ–ª—å—à–µ –∞–∫—Ç–∏–≤–æ–≤ (100+)
‚ùå –°–ª–æ–∂–Ω–µ–µ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤

<b>ü§î –ß—Ç–æ –≤—ã–±—Ä–∞—Ç—å?</b>
‚Ä¢ –ù–æ–≤–∏—á–∫–∏ ‚Üí Binarium
‚Ä¢ –û–ø—ã—Ç–Ω—ã–µ ‚Üí PocketOption
‚Ä¢ –°–∫–∞–ª—å–ø–∏–Ω–≥ ‚Üí PocketOption
‚Ä¢ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ ‚Üí CFD –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
"""
}

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
NOTIFICATION_TEMPLATES = {
    'new_signal': 'üö® –ù–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª –¥–ª—è {symbol}: {signal_type} ({confidence}% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏)',
    'signal_result': '{emoji} –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∏–≥–Ω–∞–ª–∞ {symbol}: {result} ({profit_loss})',
    'commission_earned': 'üí∞ –í–∞–º –Ω–∞—á–∏—Å–ª–µ–Ω–∞ –∫–æ–º–∏—Å—Å–∏—è: ${amount:.2f} –æ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–∞ {username}',
    'new_referral': 'üéâ –ù–æ–≤—ã–π —Ä–µ—Ñ–µ—Ä–∞–ª! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {username} –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è –ø–æ –≤–∞—à–µ–π —Å—Å—ã–ª–∫–µ',
    'premium_expired': '‚ö†Ô∏è –í–∞—à–∞ Premium –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ {days} –¥–Ω–µ–π',
    'system_update': 'üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –î–æ—Å—Ç—É–ø–Ω—ã –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏!',
    'market_alert': 'üö® –í–Ω–∏–º–∞–Ω–∏–µ! –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞ —Ä—ã–Ω–∫–µ {market}',
    'payout_processed': 'üí∏ –í—ã–ø–ª–∞—Ç–∞ ${amount:.2f} –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –≤–∞—à —Å—á–µ—Ç'
}

# –°—Ç–∞—Ç—É—Å—ã —Å–∏–≥–Ω–∞–ª–æ–≤
SIGNAL_STATUS = {
    'active': 'üü¢ –ê–∫—Ç–∏–≤–Ω—ã–π',
    'expired': '‚è∞ –ò—Å—Ç–µ–∫—à–∏–π', 
    'closed': '‚úÖ –ó–∞–∫—Ä—ã—Ç—ã–π',
    'cancelled': '‚ùå –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–π'
}

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∏–≥–Ω–∞–ª–æ–≤
SIGNAL_RESULTS = {
    'win': '‚úÖ –ü—Ä–∏–±—ã–ª—å',
    'loss': '‚ùå –£–±—ã—Ç–æ–∫',
    'breakeven': '‚ö™Ô∏è –ë–µ–∑—É–±—ã—Ç–æ–∫',
    'pending': '‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ'
}

def get_error_message(error_type: str) -> str:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ"""
    return ERROR_MESSAGES.get(error_type, '‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞.')

def get_success_message(success_type: str) -> str:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ"""
    return SUCCESS_MESSAGES.get(success_type, '‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ.')

def get_confirmation_message(action: str) -> str:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"""
    return CONFIRMATION_MESSAGES.get(action, '‚ùì –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')

def format_platform_link_message(platform: str, user_id: int) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–π —Å—Å—ã–ª–∫–æ–π"""
    
    if platform == 'binarium':
        link = f"https://clck.biz/lp/sure-start/?partner_id=p43053p136178p011d&user_ref={user_id}"
        text = f"""
üéØ <b>Binarium ‚Äî –ë–∏–Ω–∞—Ä–Ω—ã–µ –æ–ø—Ü–∏–æ–Ω—ã</b>

<b>üí∞ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</b>
‚Ä¢ –í—ã—Å–æ–∫–∏–µ –≤—ã–ø–ª–∞—Ç—ã –¥–æ 90%
‚Ä¢ –ë—ã—Å—Ç—Ä—ã–µ –≤—ã–ø–ª–∞—Ç—ã –∑–∞ 24 —á–∞—Å–∞
‚Ä¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç $10
‚Ä¢ –ë–æ–Ω—É—Å –Ω–∞ –ø–µ—Ä–≤—ã–π –¥–µ–ø–æ–∑–∏—Ç –¥–æ 100%
‚Ä¢ –ü—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

<b>üéÅ –ë–æ–Ω—É—Å –ø–æ –Ω–∞—à–µ–π —Å—Å—ã–ª–∫–µ:</b>
‚Ä¢ +50% –∫ –¥–µ–ø–æ–∑–∏—Ç—É
‚Ä¢ 5 –±–µ–∑—Ä–∏—Å–∫–æ–≤—ã—Ö —Å–¥–µ–ª–æ–∫
‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä

<b>üîó –í–∞—à–∞ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è —Å—Å—ã–ª–∫–∞:</b>
{link}

‚ö†Ô∏è <i>–¢–æ—Ä–≥–æ–≤–ª—è —Å–æ–ø—Ä—è–∂–µ–Ω–∞ —Å —Ä–∏—Å–∫–∞–º–∏</i>
"""
    
    elif platform == 'pocket_option':
        link = f"https://po-ru4.click/cabinet/demo-quick-high-low?a=OWrYm1TLeFf1Cv&ref={user_id}"
        text = f"""
üíº <b>PocketOption ‚Äî CFD –∏ –æ–ø—Ü–∏–æ–Ω—ã</b>

<b>üí∞ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</b>
‚Ä¢ –ë–æ–ª–µ–µ 100 –∞–∫—Ç–∏–≤–æ–≤ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏
‚Ä¢ –î–µ–º–æ-—Å—á–µ—Ç $10,000
‚Ä¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç $5
‚Ä¢ –¢—É—Ä–Ω–∏—Ä—ã —Å –¥–µ–Ω–µ–∂–Ω—ã–º–∏ –ø—Ä–∏–∑–∞–º–∏
‚Ä¢ –°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫

<b>üéÅ –ë–æ–Ω—É—Å WELCOME50:</b>
‚Ä¢ +50% –∫ –¥–µ–ø–æ–∑–∏—Ç—É  
‚Ä¢ –î–µ–º–æ-—Å—á–µ—Ç $10,000
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ —Ç—É—Ä–Ω–∏—Ä–∞–º

<b>üîó –í–∞—à–∞ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è —Å—Å—ã–ª–∫–∞:</b>
{link}

‚ö†Ô∏è <i>CFD ‚Äî —Å–ª–æ–∂–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã. –ò–∑—É—á–∏—Ç–µ —Ä–∏—Å–∫–∏</i>
"""
    
    return text

# –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å (–±–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
LANGUAGES = {
    'ru': {
        'welcome': '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å',
        'signal': '–°–∏–≥–Ω–∞–ª',
        'buy': '–ü–æ–∫—É–ø–∞—Ç—å',
        'sell': '–ü—Ä–æ–¥–∞–≤–∞—Ç—å',
        'profit': '–ü—Ä–∏–±—ã–ª—å',
        'loss': '–£–±—ã—Ç–æ–∫'
    },
    'en': {
        'welcome': 'Welcome',
        'signal': 'Signal', 
        'buy': 'Buy',
        'sell': 'Sell',
        'profit': 'Profit',
        'loss': 'Loss'
    }
}

def get_localized_text(key: str, lang: str = 'ru') -> str:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞"""
    return LANGUAGES.get(lang, {}).get(key, LANGUAGES['ru'].get(key, key))